{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/actions/gold.ts"],"sourcesContent":["'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\n// --- Gold Types ---\r\nexport async function getGoldTypes() {\r\n    return db.prepare('SELECT * FROM gold_types').all()\r\n}\r\n\r\nexport async function addGoldType(name: string, userId: number) {\r\n    if (!name) return { error: 'Nome é obrigatório.' }\r\n    try {\r\n        db.prepare('INSERT INTO gold_types (name, user_id) VALUES (?, ?)').run(name, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function deleteGoldType(id: number) {\r\n    try {\r\n        db.prepare('DELETE FROM gold_types WHERE id = ?').run(id)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\n// --- Units (Static for now) ---\r\nexport async function getUnits() {\r\n    // Return standard units\r\n    return [\r\n        { id: 'g', symbol: 'g', name: 'Grama' },\r\n        { id: 'kg', symbol: 'kg', name: 'Quilo' }\r\n    ]\r\n}\r\n\r\nexport async function addUnit(name: string, symbol: string, userId: number) {\r\n    // Deprecated / No-op\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;;;;;AAGO,eAAe;IAClB,OAAO,2HAAE,CAAC,OAAO,CAAC,4BAA4B,GAAG;AACrD;AAEO,eAAe,YAAY,IAAY,EAAE,MAAc;IAC1D,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAsB;IACjD,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,wDAAwD,GAAG,CAAC,MAAM;QAC7E,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;AAEO,eAAe,eAAe,EAAU;IAC3C,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,uCAAuC,GAAG,CAAC;QACtD,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;AAGO,eAAe;IAClB,wBAAwB;IACxB,OAAO;QACH;YAAE,IAAI;YAAK,QAAQ;YAAK,MAAM;QAAQ;QACtC;YAAE,IAAI;YAAM,QAAQ;YAAM,MAAM;QAAQ;KAC3C;AACL;AAEO,eAAe,QAAQ,IAAY,EAAE,MAAc,EAAE,MAAc;IACtE,qBAAqB;IACrB,OAAO;QAAE,SAAS;IAAK;AAC3B;;;IArCsB;IAIA;IAWA;IAWA;IAQA;;AAlCA,+OAAA;AAIA,+OAAA;AAWA,+OAAA;AAWA,+OAAA;AAQA,+OAAA"}},
    {"offset": {"line": 93, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/actions/points.ts"],"sourcesContent":["'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nexport async function getPoints() {\r\n    return db.prepare('SELECT * FROM points').all()\r\n}\r\n\r\nexport async function addPoint(name: string, address: string, userId: number) {\r\n    if (!name) return { error: 'Nome é obrigatório.' }\r\n    try {\r\n        db.prepare('INSERT INTO points (name, address, user_id) VALUES (?, ?, ?)').run(name, address, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function deletePoint(id: number) {\r\n    try {\r\n        db.prepare('DELETE FROM points WHERE id = ?').run(id)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;AAEO,eAAe;IAClB,OAAO,2HAAE,CAAC,OAAO,CAAC,wBAAwB,GAAG;AACjD;AAEO,eAAe,SAAS,IAAY,EAAE,OAAe,EAAE,MAAc;IACxE,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAsB;IACjD,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,gEAAgE,GAAG,CAAC,MAAM,SAAS;QAC9F,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;AAEO,eAAe,YAAY,EAAU;IACxC,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,mCAAmC,GAAG,CAAC;QAClD,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;;;IAvBsB;IAIA;IAWA;;AAfA,+OAAA;AAIA,+OAAA;AAWA,+OAAA"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/actions/couriers.ts"],"sourcesContent":["'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nexport async function getCouriers() {\r\n    return db.prepare('SELECT * FROM couriers').all()\r\n}\r\n\r\nexport async function addCourier(name: string, phone: string, defaultFee: number, userId: number) {\r\n    if (!name) return { error: 'Nome é obrigatório.' }\r\n    try {\r\n        db.prepare('INSERT INTO couriers (name, phone, default_fee, user_id) VALUES (?, ?, ?, ?)').run(name, phone, defaultFee, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function deleteCourier(id: number) {\r\n    try {\r\n        db.prepare('DELETE FROM couriers WHERE id = ?').run(id)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AAEA;AACA;;;;;AAEO,eAAe;IAClB,OAAO,2HAAE,CAAC,OAAO,CAAC,0BAA0B,GAAG;AACnD;AAEO,eAAe,WAAW,IAAY,EAAE,KAAa,EAAE,UAAkB,EAAE,MAAc;IAC5F,IAAI,CAAC,MAAM,OAAO;QAAE,OAAO;IAAsB;IACjD,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,gFAAgF,GAAG,CAAC,MAAM,OAAO,YAAY;QACxH,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;AAEO,eAAe,cAAc,EAAU;IAC1C,IAAI;QACA,2HAAE,CAAC,OAAO,CAAC,qCAAqC,GAAG,CAAC;QACpD,IAAA,+IAAc,EAAC;QACf,OAAO;YAAE,SAAS;QAAK;IAC3B,EAAE,OAAO,OAAY;QACjB,OAAO;YAAE,OAAO,MAAM,OAAO;QAAC;IAClC;AACJ;;;IAvBsB;IAIA;IAWA;;AAfA,+OAAA;AAIA,+OAAA;AAWA,+OAAA"}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/actions/transactions.ts"],"sourcesContent":["'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { writeFile, mkdir } from 'fs/promises'\r\nimport path from 'path'\r\nimport { getSession } from './auth'\r\n\r\n// Helper to save file\r\nasync function saveFile(file: File | null) {\r\n    if (!file || file.size === 0) return null\r\n\r\n    const bytes = await file.arrayBuffer()\r\n    const buffer = Buffer.from(bytes)\r\n\r\n    const uploadDir = path.join(process.cwd(), 'public', 'uploads')\r\n    await mkdir(uploadDir, { recursive: true })\r\n\r\n    const filename = `${Date.now()}-${file.name.replace(/\\s/g, '_')}`\r\n    const filepath = path.join(uploadDir, filename)\r\n\r\n    await writeFile(filepath, buffer)\r\n    return `/uploads/${filename}`\r\n}\r\n\r\nexport async function buy(formData: FormData) {\r\n    const session = await getSession()\r\n    if (!session) return { error: 'Não autorizado' }\r\n    const userId = Number(session.sub)\r\n\r\n    let weight = parseFloat(formData.get('weight') as string)\r\n    const price = parseFloat(formData.get('price') as string)\r\n    const goldTypeId = Number(formData.get('gold_type_id'))\r\n    const pointId = Number(formData.get('point_id'))\r\n    const customer = formData.get('customer') as string\r\n    const file = formData.get('receipt') as File\r\n    const unit = formData.get('unit') as string || 'g'\r\n\r\n    if (!weight || !price || !goldTypeId || !pointId) {\r\n        return { error: 'Preencha os campos obrigatórios.' }\r\n    }\r\n\r\n    // NORMALIZE TO GRAMS\r\n    if (unit === 'kg') {\r\n        weight = weight * 1000\r\n    }\r\n\r\n    try {\r\n        const receiptPath = await saveFile(file)\r\n        const date = new Date().toISOString()\r\n\r\n        const stmt = db.prepare(`\r\n        INSERT INTO transactions (type, weight_grams, price, customer_name, receipt_path, date, gold_type_id, point_id, user_id, unit) \r\n        VALUES ('BUY', ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    `)\r\n        // We store 'weight' (grams) but keep 'unit' as the ORIGINAL input unit for reference if needed, \r\n        // OR we standardize 'unit' to 'g' in DB? \r\n        // User wants \"Entrou 100kg\". If we store 'g', we lose that it was input as kg.\r\n        // Let's store the NORMALIZED weight for math, but maybe we can store the unit context?\r\n        // Actually, \"Unit\" column in DB was used for grouping. \r\n        // Better strategy: Store everything as 'g' in DB for consistency in grouping. \r\n        // The \"Unit\" column becomes less relevant for calculation, but maybe useful for \"Original Input\".\r\n        // However, to make 100kg - 100g math work easily, we must group by GoldTypeId ONLY, not (GoldTypeId + Unit).\r\n        // So we will force unit to 'g' in the DB or ignore it in grouping.\r\n\r\n        stmt.run(weight, price, customer, receiptPath, date, goldTypeId, pointId, userId, unit)\r\n\r\n        revalidatePath('/dashboard/inventory')\r\n        revalidatePath('/dashboard/transactions')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function sell(formData: FormData) {\r\n    const session = await getSession()\r\n    if (!session) return { error: 'Não autorizado' }\r\n    const userId = Number(session.sub)\r\n\r\n    let weight = parseFloat(formData.get('weight') as string)\r\n    const price = parseFloat(formData.get('price') as string)\r\n    const goldTypeId = Number(formData.get('gold_type_id'))\r\n    const pointId = Number(formData.get('point_id'))\r\n    const customer = formData.get('customer') as string\r\n    const unit = formData.get('unit') as string || 'g'\r\n\r\n    // Delivery fields\r\n    const deliveryCourier = formData.get('delivery_courier') as string\r\n    const deliveryCost = parseFloat(formData.get('delivery_cost') as string) || 0\r\n\r\n    const file = formData.get('receipt') as File\r\n\r\n    if (!weight || !price || !goldTypeId || !pointId) {\r\n        return { error: 'Preencha os campos obrigatórios.' }\r\n    }\r\n\r\n    // NORMALIZE TO GRAMS\r\n    if (unit === 'kg') {\r\n        weight = weight * 1000\r\n    }\r\n\r\n    try {\r\n        const receiptPath = await saveFile(file)\r\n        const date = new Date().toISOString()\r\n\r\n        const stmt = db.prepare(`\r\n        INSERT INTO transactions (type, weight_grams, price, customer_name, receipt_path, date, gold_type_id, point_id, user_id, unit, delivery_courier, delivery_cost) \r\n        VALUES ('SELL', ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    `)\r\n        stmt.run(weight, price, customer, receiptPath, date, goldTypeId, pointId, userId, unit, deliveryCourier, deliveryCost)\r\n\r\n        revalidatePath('/dashboard/inventory')\r\n        revalidatePath('/dashboard/transactions')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function getInventory() {\r\n    const session = await getSession()\r\n    if (!session) return []\r\n    const userId = Number(session.sub)\r\n\r\n    // Calculate inventory\r\n    // Group by Point -> Gold Type ONLY (Ignore unit column for grouping, merge everything to grams)\r\n    const txs = db.prepare(`\r\n        SELECT t.type, t.weight_grams, gt.name as gold_name, p.name as point_name \r\n        FROM transactions t\r\n        LEFT JOIN gold_types gt ON t.gold_type_id = gt.id\r\n        LEFT JOIN points p ON t.point_id = p.id\r\n        WHERE t.user_id = ?\r\n    `).all(userId) as any[]\r\n\r\n    const inventory: any = {}\r\n\r\n    txs.forEach(tx => {\r\n        const point = tx.point_name || 'Geral'\r\n        const gold = tx.gold_name || 'Desconhecido'\r\n        // Key is just Point + Gold. We aggregate ALL units here.\r\n        const key = `${point}-${gold}`\r\n\r\n        if (!inventory[key]) {\r\n            inventory[key] = {\r\n                point,\r\n                gold,\r\n                stock_grams: 0\r\n            }\r\n        }\r\n\r\n        if (tx.type === 'BUY') inventory[key].stock_grams += tx.weight_grams\r\n        if (tx.type === 'SELL') inventory[key].stock_grams -= tx.weight_grams\r\n    })\r\n\r\n    return Object.values(inventory).filter((i: any) => Math.abs(i.stock_grams) > 0.001)\r\n}\r\n\r\nexport async function getTransactions() {\r\n    const session = await getSession()\r\n    if (!session) return []\r\n    const userId = Number(session.sub)\r\n\r\n    return db.prepare(`\r\n        SELECT t.*, gt.name as gold_name, p.name as point_name\r\n        FROM transactions t\r\n        LEFT JOIN gold_types gt ON t.gold_type_id = gt.id\r\n        LEFT JOIN points p ON t.point_id = p.id\r\n        WHERE t.user_id = ?\r\n        ORDER BY date DESC\r\n    `).all(userId)\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n    extends React.InputHTMLAttributes<HTMLInputElement> { }\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, ...props }, ref) => {\r\n        return (\r\n            <input\r\n                type={type}\r\n                className={cn(\r\n                    \"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAKA,MAAM,sBAAQ,mNAAgB,CAC1B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC5B,qBACI,8OAAC;QACG,MAAM;QACN,WAAW,IAAA,yHAAE,EACT,qdACA;QAEJ,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;AAEJ,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 437, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/components/ui/label.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Label = registerClientReference(\n    function() { throw new Error(\"Attempted to call Label() from the server but Label is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/label.tsx <module evaluation>\",\n    \"Label\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,6DACA","ignoreList":[0]}},
    {"offset": {"line": 451, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/components/ui/label.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Label = registerClientReference(\n    function() { throw new Error(\"Attempted to call Label() from the server but Label is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/label.tsx\",\n    \"Label\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;AACO,MAAM,QAAQ,IAAA,wQAAuB,EACxC;IAAa,MAAM,IAAI,MAAM;AAA0N,GACvP,yCACA","ignoreList":[0]}},
    {"offset": {"line": 465, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\r\n            \"rounded-lg border border-zinc-200 bg-white text-zinc-950 shadow-sm dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n    <h3\r\n        ref={ref}\r\n        className={cn(\r\n            \"text-2xl font-semibold leading-none tracking-tight\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n    <p\r\n        ref={ref}\r\n        className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex items-center p-6 pt-0\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,mNAAgB,CAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EACT,8HACA;QAEH,GAAG,KAAK;;;;;;AAGjB,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,mNAAgB,CAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EACT,sDACA;QAEH,GAAG,KAAK;;;;;;AAGjB,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,mNAAgB,CAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,4CAA4C;QACzD,GAAG,KAAK;;;;;;AAGjB,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,mNAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QAAI,KAAK;QAAK,WAAW,IAAA,yHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;AAElE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,mNAAgB,CAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACxB,8OAAC;QACG,KAAK;QACL,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGjB,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/app/dashboard/sell/page.tsx"],"sourcesContent":["import { getGoldTypes } from '@/actions/gold'\r\nimport { getPoints } from '@/actions/points'\r\nimport { getCouriers } from '@/actions/couriers'\r\nimport { sell } from '@/actions/transactions'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport default async function SellPage() {\r\n    const goldTypes = await getGoldTypes()\r\n    const points = await getPoints()\r\n    const couriers = await getCouriers()\r\n\r\n    async function action(formData: FormData) {\r\n        'use server'\r\n        const res = await sell(formData)\r\n        if (res?.error) {\r\n            console.error(res.error)\r\n        } else {\r\n            redirect('/dashboard/inventory')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex justify-center\">\r\n            <Card className=\"w-full max-w-lg border-amber-200 dark:border-amber-900 shadow-amber-500/10 shadow-lg\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"text-amber-600 dark:text-amber-500\">Nova Venda</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <form action={action} className=\"grid gap-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label>Local de Saída</Label>\r\n                                <select name=\"point_id\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800 focus:ring-amber-500\" required>\r\n                                    {points.map((p: any) => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <Label>Tipo de Ouro</Label>\r\n                                <select name=\"gold_type_id\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800 focus:ring-amber-500\" required>\r\n                                    {goldTypes.map((g: any) => <option key={g.id} value={g.id}>{g.name}</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label>Peso</Label>\r\n                                <Input name=\"weight\" type=\"number\" step=\"0.01\" required />\r\n                            </div>\r\n                            <div>\r\n                                <Label>Unidade</Label>\r\n                                <select name=\"unit\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800 focus:ring-amber-500\">\r\n                                    <option value=\"g\">Grama (g)</option>\r\n                                    <option value=\"kg\">Quilo (kg)</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Preço de Venda (R$)</Label>\r\n                            <Input name=\"price\" type=\"number\" step=\"0.01\" required />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Cliente</Label>\r\n                            <Input name=\"customer\" placeholder=\"Nome do cliente\" />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label>Entregador (Opcional)</Label>\r\n                                <select name=\"delivery_courier\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800 focus:ring-amber-500\">\r\n                                    <option value=\"\">Nenhum / Retirada</option>\r\n                                    {couriers.map((c: any) => <option key={c.id} value={c.name}>{c.name}</option>)}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <Label>Custo Entrega (R$)</Label>\r\n                                <Input name=\"delivery_cost\" type=\"number\" step=\"0.01\" placeholder=\"0.00\" />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Comprovante (Foto)</Label>\r\n                            <Input name=\"receipt\" type=\"file\" accept=\"image/*\" />\r\n                        </div>\r\n\r\n                        <Button type=\"submit\" className=\"w-full bg-green-600 hover:bg-green-700 text-white\">Registrar Venda</Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 956, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/.next-internal/server/app/dashboard/sell/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getSession as '0002959933141a8591005362d9782db40d573d8cf8'} from 'ACTIONS_MODULE0'\nexport {logout as '00a1b9d856be879042d75ff8dc8dfb1962524258ed'} from 'ACTIONS_MODULE0'\nexport {register as '40e0bd842711d0001166ef627af8cdd4fdfd29a8c8'} from 'ACTIONS_MODULE0'\nexport {login as '40e3529cc11f2a04b1381f754a6a7c944ce0f2ce39'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '4068c3494f5d963d9ed7313c32abef4583f8d5d1a7'} from 'ACTIONS_MODULE1'\nexport {getGoldTypes as '00d21a24f5b59e38c72ac9d9dabd34fe7beacb3fca'} from 'ACTIONS_MODULE2'\nexport {getUnits as '00e148d512a9f0c88de30b87a04e918b1e1a8c36c6'} from 'ACTIONS_MODULE2'\nexport {deleteGoldType as '409264ad8a969cb16f0f5f603f3e617c832129ee2a'} from 'ACTIONS_MODULE2'\nexport {addGoldType as '6052195bed8ff9f808f48a6d14d8bc829aad71a675'} from 'ACTIONS_MODULE2'\nexport {addUnit as '70d5a5be56884eeb232f17c63c8b28382dc4d435f2'} from 'ACTIONS_MODULE2'\nexport {getPoints as '0020fce195b8defcb4651b1d7d264e54f6addfaf7a'} from 'ACTIONS_MODULE3'\nexport {deletePoint as '401509319cfa658d001112a73990c2beee117875a6'} from 'ACTIONS_MODULE3'\nexport {addPoint as '70e37246521062bf64cd03fcbb55927e68d312ba23'} from 'ACTIONS_MODULE3'\nexport {getCouriers as '00afe604ffd025a8ab47f48bdaafdda00aa3a623b4'} from 'ACTIONS_MODULE4'\nexport {deleteCourier as '40dbfbf9671d93557d3665f79e41e8a5669c8a29a9'} from 'ACTIONS_MODULE4'\nexport {addCourier as '7850284344ffca868449544ec5c1e2a3df3a4797e3'} from 'ACTIONS_MODULE4'\nexport {getInventory as '008f922624bec3cd7d7127a70dee5cb7eb09f87f14'} from 'ACTIONS_MODULE5'\nexport {getTransactions as '00dee16e6190adbdc458be42dc5a61a99dbfa86c29'} from 'ACTIONS_MODULE5'\nexport {buy as '403b338f71653513c62afda809781b1cd68b6a1ec6'} from 'ACTIONS_MODULE5'\nexport {sell as '40d49c43eff74a425b8d9d5146453d76bb766db371'} from 'ACTIONS_MODULE5'\n"],"names":[],"mappings":";AAAA;AAIA;AACA;AAKA;AAGA;AAGA"}}]
}