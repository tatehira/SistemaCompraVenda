{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/lib/db.ts"],"sourcesContent":["import Database from 'better-sqlite3';\r\nimport path from 'path';\r\n\r\nconst dbPath = path.resolve(process.cwd(), 'gold_system.db');\r\n\r\nconst db = new Database(dbPath, { verbose: console.log });\r\ndb.pragma('journal_mode = WAL');\r\n\r\nexport default db;\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,4GAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;AAE3C,MAAM,KAAK,IAAI,8LAAQ,CAAC,QAAQ;IAAE,SAAS,QAAQ,GAAG;AAAC;AACvD,GAAG,MAAM,CAAC;uCAEK"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/actions/auth.ts"],"sourcesContent":["'use server'\r\n\r\nimport { cookies } from 'next/headers'\r\nimport { redirect } from 'next/navigation'\r\nimport { SignJWT, jwtVerify } from 'jose'\r\nimport database from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nconst SECRET_KEY = new TextEncoder().encode('my-secret-key-change-this-in-prod')\r\n\r\nexport async function login(formData: FormData) {\r\n    const username = formData.get('username') as string\r\n    const password = formData.get('password') as string // In prod, hash check!\r\n\r\n    if (!username || !password) {\r\n        return { error: 'Preencha todos os campos.' }\r\n    }\r\n\r\n    const user = database.prepare('SELECT * FROM users WHERE username = ? AND password = ?').get(username, password) as any\r\n\r\n    if (!user) {\r\n        return { error: 'Credenciais inválidas.' }\r\n    }\r\n\r\n    // Create Session\r\n    const token = await new SignJWT({ sub: user.id.toString(), role: user.role, username: user.username })\r\n        .setProtectedHeader({ alg: 'HS256' })\r\n        .setExpirationTime('24h')\r\n        .sign(SECRET_KEY)\r\n\r\n    const cookieStore = await cookies()\r\n    cookieStore.set('session', token, {\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        maxAge: 60 * 60 * 24, // 1 day\r\n        path: '/',\r\n    })\r\n\r\n    redirect('/dashboard')\r\n}\r\n\r\nexport async function register(formData: FormData) {\r\n    const username = formData.get('username') as string\r\n    const password = formData.get('password') as string\r\n\r\n    if (!username || !password) {\r\n        return { error: 'Preencha todos os campos.' }\r\n    }\r\n\r\n    try {\r\n        const existing = database.prepare('SELECT * FROM users WHERE username = ?').get(username)\r\n        if (existing) {\r\n            return { error: 'Usuário já existe.' }\r\n        }\r\n\r\n        const result = database.prepare(\r\n            \"INSERT INTO users (username, password, role, preferred_unit) VALUES (?, ?, 'admin', 'g')\"\r\n        ).run(username, password)\r\n\r\n        // Auto login\r\n        const token = await new SignJWT({ sub: result.lastInsertRowid.toString(), role: 'admin', username })\r\n            .setProtectedHeader({ alg: 'HS256' })\r\n            .setExpirationTime('24h')\r\n            .sign(SECRET_KEY)\r\n\r\n        const cookieStore = await cookies()\r\n        cookieStore.set('session', token, {\r\n            httpOnly: true,\r\n            secure: process.env.NODE_ENV === 'production',\r\n            maxAge: 60 * 60 * 24, // 1 day\r\n            path: '/',\r\n        })\r\n\r\n    } catch (err: any) {\r\n        return { error: err.message || 'Erro ao criar conta.' }\r\n    }\r\n\r\n    redirect('/dashboard')\r\n}\r\n\r\nexport async function logout() {\r\n    const cookieStore = await cookies()\r\n    cookieStore.delete('session')\r\n    redirect('/login')\r\n}\r\n\r\nexport async function getSession() {\r\n    const cookieStore = await cookies()\r\n    const session = cookieStore.get('session')?.value\r\n    if (!session) return null\r\n\r\n    try {\r\n        const { payload } = await jwtVerify(session, SECRET_KEY, { algorithms: ['HS256'] })\r\n        return payload\r\n    } catch (error) {\r\n        return null\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;AAGA,MAAM,aAAa,IAAI,cAAc,MAAM,CAAC;AAErC,eAAe,MAAM,QAAkB;IAC1C,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,WAAW,SAAS,GAAG,CAAC,WAAsB,uBAAuB;;IAE3E,IAAI,CAAC,YAAY,CAAC,UAAU;QACxB,OAAO;YAAE,OAAO;QAA4B;IAChD;IAEA,MAAM,OAAO,2HAAQ,CAAC,OAAO,CAAC,2DAA2D,GAAG,CAAC,UAAU;IAEvG,IAAI,CAAC,MAAM;QACP,OAAO;YAAE,OAAO;QAAyB;IAC7C;IAEA,iBAAiB;IACjB,MAAM,QAAQ,MAAM,IAAI,gKAAO,CAAC;QAAE,KAAK,KAAK,EAAE,CAAC,QAAQ;QAAI,MAAM,KAAK,IAAI;QAAE,UAAU,KAAK,QAAQ;IAAC,GAC/F,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,iBAAiB,CAAC,OAClB,IAAI,CAAC;IAEV,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,GAAG,CAAC,WAAW,OAAO;QAC9B,UAAU;QACV,QAAQ,oDAAyB;QACjC,QAAQ,KAAK,KAAK;QAClB,MAAM;IACV;IAEA,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe,SAAS,QAAkB;IAC7C,MAAM,WAAW,SAAS,GAAG,CAAC;IAC9B,MAAM,WAAW,SAAS,GAAG,CAAC;IAE9B,IAAI,CAAC,YAAY,CAAC,UAAU;QACxB,OAAO;YAAE,OAAO;QAA4B;IAChD;IAEA,IAAI;QACA,MAAM,WAAW,2HAAQ,CAAC,OAAO,CAAC,0CAA0C,GAAG,CAAC;QAChF,IAAI,UAAU;YACV,OAAO;gBAAE,OAAO;YAAqB;QACzC;QAEA,MAAM,SAAS,2HAAQ,CAAC,OAAO,CAC3B,4FACF,GAAG,CAAC,UAAU;QAEhB,aAAa;QACb,MAAM,QAAQ,MAAM,IAAI,gKAAO,CAAC;YAAE,KAAK,OAAO,eAAe,CAAC,QAAQ;YAAI,MAAM;YAAS;QAAS,GAC7F,kBAAkB,CAAC;YAAE,KAAK;QAAQ,GAClC,iBAAiB,CAAC,OAClB,IAAI,CAAC;QAEV,MAAM,cAAc,MAAM,IAAA,0IAAO;QACjC,YAAY,GAAG,CAAC,WAAW,OAAO;YAC9B,UAAU;YACV,QAAQ,oDAAyB;YACjC,QAAQ,KAAK,KAAK;YAClB,MAAM;QACV;IAEJ,EAAE,OAAO,KAAU;QACf,OAAO;YAAE,OAAO,IAAI,OAAO,IAAI;QAAuB;IAC1D;IAEA,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;IACnB,IAAA,iMAAQ,EAAC;AACb;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,UAAU,YAAY,GAAG,CAAC,YAAY;IAC5C,IAAI,CAAC,SAAS,OAAO;IAErB,IAAI;QACA,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,oKAAS,EAAC,SAAS,YAAY;YAAE,YAAY;gBAAC;aAAQ;QAAC;QACjF,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,OAAO;IACX;AACJ;;;IAvFsB;IA+BA;IAuCA;IAMA;;AA5EA,+OAAA;AA+BA,+OAAA;AAuCA,+OAAA;AAMA,+OAAA"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB"}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface ButtonProps\r\n    extends React.ButtonHTMLAttributes<HTMLButtonElement> {\r\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\"\r\n    size?: \"default\" | \"sm\" | \"lg\" | \"icon\"\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n    ({ className, variant = \"default\", size = \"default\", ...props }, ref) => {\r\n\r\n        // Updated to use Semantic Variables defined in globals.css\r\n        const variants = {\r\n            default: \"bg-primary text-primary-foreground hover:bg-primary/90 shadow-md shadow-primary/20\",\r\n            destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-md shadow-destructive/20\",\r\n            outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\r\n            secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\r\n            ghost: \"hover:bg-accent hover:text-accent-foreground\",\r\n            link: \"text-primary underline-offset-4 hover:underline\",\r\n        }\r\n\r\n        const sizes = {\r\n            default: \"h-10 px-4 py-2\",\r\n            sm: \"h-9 rounded-md px-3\",\r\n            lg: \"h-11 rounded-md px-8\",\r\n            icon: \"h-10 w-10\",\r\n        }\r\n\r\n        return (\r\n            <button\r\n                className={cn(\r\n                    \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n                    variants[variant],\r\n                    sizes[size],\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button }\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQA,MAAM,uBAAS,mNAAgB,CAC3B,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG,OAAO,EAAE;IAE7D,2DAA2D;IAC3D,MAAM,WAAW;QACb,SAAS;QACT,aAAa;QACb,SAAS;QACT,WAAW;QACX,OAAO;QACP,MAAM;IACV;IAEA,MAAM,QAAQ;QACV,SAAS;QACT,IAAI;QACJ,IAAI;QACJ,MAAM;IACV;IAEA,qBACI,8OAAC;QACG,WAAW,IAAA,yHAAE,EACT,0RACA,QAAQ,CAAC,QAAQ,EACjB,KAAK,CAAC,KAAK,EACX;QAEJ,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Nick/Documents/Nick/Sistemas/SistemaCompraVenda/sistema-gold/src/app/dashboard/layout.tsx"],"sourcesContent":["import Link from 'next/link'\r\nimport { logout } from '@/actions/auth'\r\nimport { Button } from '@/components/ui/button'\r\nimport { LayoutDashboard, ShoppingCart, DollarSign, Package, History, Settings, LogOut } from 'lucide-react'\r\n\r\nexport default function DashboardLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode\r\n}) {\r\n    return (\r\n        <div className=\"flex min-h-screen w-full bg-zinc-50 dark:bg-zinc-950 transition-colors duration-300\">\r\n            {/* Sidebar */}\r\n            <aside className=\"fixed inset-y-0 left-0 z-10 hidden w-64 flex-col border-r border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-950/50 backdrop-blur-xl sm:flex transition-colors duration-300\">\r\n                <div className=\"flex h-16 items-center justify-center border-b border-zinc-200 px-6 dark:border-zinc-800\">\r\n                    <Link href=\"/dashboard\" className=\"flex items-center gap-2 font-bold text-xl tracking-tighter\">\r\n                        <span className=\"text-amber-500 shiny-gold\">GOLD</span>SYSTEM\r\n                    </Link>\r\n                </div>\r\n                <nav className=\"flex flex-col gap-2 p-4\">\r\n                    <Link\r\n                        href=\"/dashboard\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <LayoutDashboard className=\"h-4 w-4\" />\r\n                        Dashboard\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/dashboard/buy\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <ShoppingCart className=\"h-4 w-4\" />\r\n                        Comprar\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/dashboard/sell\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <DollarSign className=\"h-4 w-4\" />\r\n                        Vender\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/dashboard/inventory\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <Package className=\"h-4 w-4\" />\r\n                        Estoque\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/dashboard/transactions\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <History className=\"h-4 w-4\" />\r\n                        Histórico\r\n                    </Link>\r\n                    <Link\r\n                        href=\"/dashboard/settings\"\r\n                        className=\"flex items-center gap-3 rounded-lg px-3 py-2 text-zinc-500 transition-all hover:text-amber-600 hover:bg-amber-50 dark:text-zinc-400 dark:hover:text-amber-400 dark:hover:bg-amber-950/30\"\r\n                    >\r\n                        <Settings className=\"h-4 w-4\" />\r\n                        Configurações\r\n                    </Link>\r\n                </nav>\r\n                <div className=\"mt-auto p-4 border-t border-zinc-200 dark:border-zinc-800\">\r\n                    <form action={logout}>\r\n                        <Button variant=\"ghost\" className=\"w-full justify-start gap-3 text-zinc-500 hover:text-red-500 hover:bg-red-50 dark:text-zinc-400 dark:hover:text-red-400 dark:hover:bg-red-950/30\">\r\n                            <LogOut className=\"h-4 w-4\" />\r\n                            Sair\r\n                        </Button>\r\n                    </form>\r\n                </div>\r\n            </aside>\r\n\r\n            {/* Main Content */}\r\n            <div className=\"flex flex-col sm:pl-64 w-full\">\r\n                <header className=\"sticky top-0 z-30 flex h-16 items-center gap-4 border-b border-zinc-200 bg-white/80 backdrop-blur-md px-6 dark:border-zinc-800 dark:bg-zinc-950/80 sm:hidden\">\r\n                    <Link href=\"/dashboard\" className=\"font-bold text-lg\">\r\n                        <span className=\"text-amber-500\">GOLD</span>SYSTEM\r\n                    </Link>\r\n                </header>\r\n\r\n                <main className=\"flex-1 p-4 md:p-8 max-w-7xl mx-auto w-full animate-in fade-in slide-in-from-bottom-4 duration-500\">\r\n                    {children}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;AAEe,SAAS,gBAAgB,EACpC,QAAQ,EAGX;IACG,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAM,WAAU;;kCACb,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,0LAAI;4BAAC,MAAK;4BAAa,WAAU;;8CAC9B,8OAAC;oCAAK,WAAU;8CAA4B;;;;;;gCAAW;;;;;;;;;;;;kCAG/D,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,+OAAe;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAG3C,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,sOAAY;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGxC,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,gOAAU;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGtC,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,mNAAO;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGnC,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,mNAAO;wCAAC,WAAU;;;;;;oCAAY;;;;;;;0CAGnC,8OAAC,0LAAI;gCACD,MAAK;gCACL,WAAU;;kDAEV,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;kCAIxC,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,QAAQ,gIAAM;sCAChB,cAAA,8OAAC,4IAAM;gCAAC,SAAQ;gCAAQ,WAAU;;kDAC9B,8OAAC,oNAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;;;;;0BAQ9C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAO,WAAU;kCACd,cAAA,8OAAC,0LAAI;4BAAC,MAAK;4BAAa,WAAU;;8CAC9B,8OAAC;oCAAK,WAAU;8CAAiB;;;;;;gCAAW;;;;;;;;;;;;kCAIpD,8OAAC;wBAAK,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAKrB"}}]
}