{"version":3,"sources":["../../../../src/actions/transactions.ts","../../../../src/components/ui/card.tsx","../../../../src/actions/gold.ts","../../../../src/actions/points.ts","../../../../src/components/ui/input.tsx","../../../../src/components/ui/label.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/dashboard/buy/page.tsx","../../../../.next-internal/server/app/dashboard/buy/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\nimport { writeFile, mkdir } from 'fs/promises'\r\nimport path from 'path'\r\nimport { getSession } from './auth'\r\n\r\n// Helper to save file\r\nasync function saveFile(file: File | null) {\r\n    if (!file || file.size === 0) return null\r\n\r\n    const bytes = await file.arrayBuffer()\r\n    const buffer = Buffer.from(bytes)\r\n\r\n    const uploadDir = path.join(process.cwd(), 'public', 'uploads')\r\n    await mkdir(uploadDir, { recursive: true })\r\n\r\n    const filename = `${Date.now()}-${file.name.replace(/\\s/g, '_')}`\r\n    const filepath = path.join(uploadDir, filename)\r\n\r\n    await writeFile(filepath, buffer)\r\n    return `/uploads/${filename}`\r\n}\r\n\r\nexport async function buy(formData: FormData) {\r\n    const session = await getSession()\r\n    if (!session) return { error: 'Não autorizado' }\r\n    const userId = Number(session.sub)\r\n\r\n    const weight = parseFloat(formData.get('weight') as string)\r\n    const price = parseFloat(formData.get('price') as string)\r\n    const goldTypeId = Number(formData.get('gold_type_id'))\r\n    const pointId = Number(formData.get('point_id'))\r\n    const customer = formData.get('customer') as string\r\n    const file = formData.get('receipt') as File\r\n    const unit = formData.get('unit') as string || 'g'\r\n\r\n    if (!weight || !price || !goldTypeId || !pointId) {\r\n        return { error: 'Preencha os campos obrigatórios.' }\r\n    }\r\n\r\n    try {\r\n        const receiptPath = await saveFile(file)\r\n        const date = new Date().toISOString()\r\n\r\n        const stmt = db.prepare(`\r\n        INSERT INTO transactions (type, weight_grams, price, customer_name, receipt_path, date, gold_type_id, point_id, user_id, unit) \r\n        VALUES ('BUY', ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    `)\r\n        stmt.run(weight, price, customer, receiptPath, date, goldTypeId, pointId, userId, unit)\r\n\r\n        revalidatePath('/dashboard/inventory')\r\n        revalidatePath('/dashboard/transactions')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function sell(formData: FormData) {\r\n    const session = await getSession()\r\n    if (!session) return { error: 'Não autorizado' }\r\n    const userId = Number(session.sub)\r\n\r\n    const weight = parseFloat(formData.get('weight') as string)\r\n    const price = parseFloat(formData.get('price') as string)\r\n    const goldTypeId = Number(formData.get('gold_type_id'))\r\n    const pointId = Number(formData.get('point_id'))\r\n    const customer = formData.get('customer') as string\r\n    const unit = formData.get('unit') as string || 'g'\r\n\r\n    // Delivery fields\r\n    const deliveryCourier = formData.get('delivery_courier') as string\r\n    const deliveryCost = parseFloat(formData.get('delivery_cost') as string) || 0\r\n\r\n    const file = formData.get('receipt') as File\r\n\r\n    if (!weight || !price || !goldTypeId || !pointId) {\r\n        return { error: 'Preencha os campos obrigatórios.' }\r\n    }\r\n\r\n    try {\r\n        const receiptPath = await saveFile(file)\r\n        const date = new Date().toISOString()\r\n\r\n        const stmt = db.prepare(`\r\n        INSERT INTO transactions (type, weight_grams, price, customer_name, receipt_path, date, gold_type_id, point_id, user_id, unit, delivery_courier, delivery_cost) \r\n        VALUES ('SELL', ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    `)\r\n        stmt.run(weight, price, customer, receiptPath, date, goldTypeId, pointId, userId, unit, deliveryCourier, deliveryCost)\r\n\r\n        revalidatePath('/dashboard/inventory')\r\n        revalidatePath('/dashboard/transactions')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function getInventory() {\r\n    const session = await getSession()\r\n    if (!session) return []\r\n    const userId = Number(session.sub)\r\n\r\n    // Calculate inventory\r\n    // Group by Point -> Gold Type -> Unit\r\n    const txs = db.prepare(`\r\n        SELECT t.type, t.weight_grams, t.unit, gt.name as gold_name, p.name as point_name \r\n        FROM transactions t\r\n        LEFT JOIN gold_types gt ON t.gold_type_id = gt.id\r\n        LEFT JOIN points p ON t.point_id = p.id\r\n        WHERE t.user_id = ?\r\n    `).all(userId) as any[]\r\n\r\n    const inventory: any = {}\r\n\r\n    txs.forEach(tx => {\r\n        const point = tx.point_name || 'Geral'\r\n        const gold = tx.gold_name || 'Desconhecido'\r\n        const unit = tx.unit || 'g'\r\n        const key = `${point}-${gold}-${unit}`\r\n\r\n        if (!inventory[key]) {\r\n            inventory[key] = {\r\n                point,\r\n                gold,\r\n                unit,\r\n                stock: 0\r\n            }\r\n        }\r\n\r\n        if (tx.type === 'BUY') inventory[key].stock += tx.weight_grams\r\n        if (tx.type === 'SELL') inventory[key].stock -= tx.weight_grams\r\n    })\r\n\r\n    return Object.values(inventory).filter((i: any) => i.stock !== 0)\r\n}\r\n\r\nexport async function getTransactions() {\r\n    const session = await getSession()\r\n    if (!session) return []\r\n    const userId = Number(session.sub)\r\n\r\n    return db.prepare(`\r\n        SELECT t.*, gt.name as gold_name, p.name as point_name\r\n        FROM transactions t\r\n        LEFT JOIN gold_types gt ON t.gold_type_id = gt.id\r\n        LEFT JOIN points p ON t.point_id = p.id\r\n        WHERE t.user_id = ?\r\n        ORDER BY date DESC\r\n    `).all(userId)\r\n}\r\n","import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nconst Card = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\r\n            \"rounded-lg border border-zinc-200 bg-white text-zinc-950 shadow-sm dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n    <h3\r\n        ref={ref}\r\n        className={cn(\r\n            \"text-2xl font-semibold leading-none tracking-tight\",\r\n            className\r\n        )}\r\n        {...props}\r\n    />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n    HTMLParagraphElement,\r\n    React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n    <p\r\n        ref={ref}\r\n        className={cn(\"text-sm text-zinc-500 dark:text-zinc-400\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n    HTMLDivElement,\r\n    React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n    <div\r\n        ref={ref}\r\n        className={cn(\"flex items-center p-6 pt-0\", className)}\r\n        {...props}\r\n    />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n","'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\n// --- Gold Types ---\r\nexport async function getGoldTypes() {\r\n    return db.prepare('SELECT * FROM gold_types').all()\r\n}\r\n\r\nexport async function addGoldType(name: string, userId: number) {\r\n    if (!name) return { error: 'Nome é obrigatório.' }\r\n    try {\r\n        db.prepare('INSERT INTO gold_types (name, user_id) VALUES (?, ?)').run(name, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function deleteGoldType(id: number) {\r\n    try {\r\n        db.prepare('DELETE FROM gold_types WHERE id = ?').run(id)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\n// --- Measure Units ---\r\nexport async function getUnits() {\r\n    return db.prepare('SELECT * FROM measure_units').all()\r\n}\r\n\r\nexport async function addUnit(name: string, symbol: string, userId: number) {\r\n    if (!name || !symbol) return { error: 'Nome e símbolo são obrigatórios.' }\r\n    try {\r\n        db.prepare('INSERT INTO measure_units (name, symbol, user_id) VALUES (?, ?, ?)').run(name, symbol, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        revalidatePath('/dashboard/buy') // Used in buy\r\n        revalidatePath('/dashboard/sell') // Used in sell\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n","'use server'\r\n\r\nimport db from '@/lib/db'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nexport async function getPoints() {\r\n    return db.prepare('SELECT * FROM points').all()\r\n}\r\n\r\nexport async function addPoint(name: string, address: string, userId: number) {\r\n    if (!name) return { error: 'Nome é obrigatório.' }\r\n    try {\r\n        db.prepare('INSERT INTO points (name, address, user_id) VALUES (?, ?, ?)').run(name, address, userId)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n\r\nexport async function deletePoint(id: number) {\r\n    try {\r\n        db.prepare('DELETE FROM points WHERE id = ?').run(id)\r\n        revalidatePath('/dashboard/settings')\r\n        return { success: true }\r\n    } catch (error: any) {\r\n        return { error: error.message }\r\n    }\r\n}\r\n","import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport interface InputProps\r\n    extends React.InputHTMLAttributes<HTMLInputElement> { }\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n    ({ className, type, ...props }, ref) => {\r\n        return (\r\n            <input\r\n                type={type}\r\n                className={cn(\r\n                    \"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-zinc-800 dark:bg-zinc-950 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300\",\r\n                    className\r\n                )}\r\n                ref={ref}\r\n                {...props}\r\n            />\r\n        )\r\n    }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const Label = registerClientReference(\n    function() { throw new Error(\"Attempted to call Label() from the server but Label is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/label.tsx\",\n    \"Label\",\n);\n","import { getGoldTypes, getUnits } from '@/actions/gold'\r\nimport { getPoints } from '@/actions/points'\r\nimport { buy } from '@/actions/transactions'\r\nimport { Button } from '@/components/ui/button'\r\nimport { Input } from '@/components/ui/input'\r\nimport { Label } from '@/components/ui/label'\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\r\nimport { redirect } from 'next/navigation'\r\n\r\nexport default async function BuyPage() {\r\n    const goldTypes = await getGoldTypes()\r\n    const points = await getPoints()\r\n    const units = await getUnits()\r\n\r\n    async function action(formData: FormData) {\r\n        'use server'\r\n        const res = await buy(formData)\r\n        if (res?.error) {\r\n            // Handle error (ideally with client component state, simplifying here)\r\n            console.error(res.error)\r\n        } else {\r\n            redirect('/dashboard/inventory')\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex justify-center\">\r\n            <Card className=\"w-full max-w-lg\">\r\n                <CardHeader>\r\n                    <CardTitle>Nova Compra</CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <form action={action} className=\"grid gap-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label>Local (Ponto)</Label>\r\n                                <select name=\"point_id\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800\" required>\r\n                                    {points.map((p: any) => <option key={p.id} value={p.id}>{p.name}</option>)}\r\n                                </select>\r\n                            </div>\r\n                            <div>\r\n                                <Label>Tipo de Ouro</Label>\r\n                                <select name=\"gold_type_id\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800\" required>\r\n                                    {goldTypes.map((g: any) => <option key={g.id} value={g.id}>{g.name}</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <Label>Peso</Label>\r\n                                <Input name=\"weight\" type=\"number\" step=\"0.01\" required />\r\n                            </div>\r\n                            <div>\r\n                                <Label>Unidade</Label>\r\n                                <select name=\"unit\" className=\"flex h-10 w-full rounded-md border border-zinc-200 bg-white px-3 py-2 text-sm dark:bg-zinc-950 dark:border-zinc-800\">\r\n                                    <option value=\"g\">Grama (g)</option>\r\n                                    {units.map((u: any) => <option key={u.id} value={u.symbol}>{u.name} ({u.symbol})</option>)}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Preço Total (R$)</Label>\r\n                            <Input name=\"price\" type=\"number\" step=\"0.01\" required />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Fornecedor / Cliente</Label>\r\n                            <Input name=\"customer\" placeholder=\"Nome do vendedor\" />\r\n                        </div>\r\n\r\n                        <div>\r\n                            <Label>Comprovante (Foto)</Label>\r\n                            <Input name=\"receipt\" type=\"file\" accept=\"image/*\" />\r\n                        </div>\r\n\r\n                        <Button type=\"submit\" className=\"w-full\">Registrar Compra</Button>\r\n                    </form>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n","export {getSession as '00a5fb6db855bcb8de8eb3a3a932b31c246b050806'} from 'ACTIONS_MODULE0'\nexport {logout as '00bf6aff51c053136cb6843a038c949bec8344cd38'} from 'ACTIONS_MODULE0'\nexport {register as '40de66b91b194dec19db6ac662585f11b7e4a40d7e'} from 'ACTIONS_MODULE0'\nexport {login as '40fde23bb9f3b5528f0905b64385d2e2c58f4d95ea'} from 'ACTIONS_MODULE0'\nexport {$$RSC_SERVER_ACTION_0 as '40cba321549654612afe1a950497edf1f8b7e5ad4d'} from 'ACTIONS_MODULE1'\nexport {getGoldTypes as '006ff5a9a01318355c0cb838e76207eefb49499a37'} from 'ACTIONS_MODULE2'\nexport {getUnits as '00c2c28db7956f12b6a324d5393faade5d24aef9c3'} from 'ACTIONS_MODULE2'\nexport {deleteGoldType as '4035a79cd9c5050b1cf48c9e4e8c448e5d4ee91899'} from 'ACTIONS_MODULE2'\nexport {addGoldType as '6042b82a4e7b8e78a90da6c68c24ede9d08b4dd8de'} from 'ACTIONS_MODULE2'\nexport {addUnit as '70e240c64f1b893e4330a824ff714aca8811d09d80'} from 'ACTIONS_MODULE2'\nexport {getPoints as '007d81bb561d558582fb95472ef184666a2f135d30'} from 'ACTIONS_MODULE3'\nexport {deletePoint as '400c7b16902ee3aec2a157feb04e2e7525e3bed98a'} from 'ACTIONS_MODULE3'\nexport {addPoint as '70b58ca422a251fd325244d69075be06a0dd6cc405'} from 'ACTIONS_MODULE3'\nexport {getInventory as '00ab95d72063df75aa50e57cde3609728199fe6e11'} from 'ACTIONS_MODULE4'\nexport {getTransactions as '00fab7af394b8cefcf5dc4a8d853b75d19563c842f'} from 'ACTIONS_MODULE4'\nexport {buy as '4011e4ad4af21d24326eb2052b8e6074085bed4aed'} from 'ACTIONS_MODULE4'\nexport {sell as '404c8c67f791b7cd5144b3a290165d08875034dfd4'} from 'ACTIONS_MODULE4'\n"],"names":[],"mappings":"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","ignoreList":[5]}